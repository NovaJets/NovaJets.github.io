<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NoveJet Checkout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="simple-page">
  <div class="simple-container">
    <h1>Checkout</h1>
    <p class="simple-sub">Secure payment with Razorpay</p>

    <div id="orderSummary"></div>

    <div class="amount">
      Total: <strong>$<span id="totalAmount">0.00</span> USD</strong>
    </div>

    <button id="payBtn" class="simple-btn-primary">Pay with Razorpay</button>
    <p class="simple-sub" style="font-size:0.8rem;"><a href="cart.html">Back to cart</a></p>
  </div>
</div>

<footer>
  <div class="footer-inner">
    Â© <span id="year"></span> NoveJet.
  </div>
</footer>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<script>
const CART_KEY = "novejet_cart";
const PRODUCT_PRICE = 39.99;
const TAX_RATE = 0.0968;

const summaryDiv = document.getElementById("orderSummary");
const totalAmountSpan = document.getElementById("totalAmount");
const payBtn = document.getElementById("payBtn");
const yearSpan = document.getElementById("year");

yearSpan.textContent = new Date().getFullYear();

let cart = JSON.parse(localStorage.getItem(CART_KEY)) || { qty: 0, price: PRODUCT_PRICE };
const qty = cart.qty || 0;

if (qty <= 0) {
  window.location.href = "cart.html";
}

const subtotal = PRODUCT_PRICE * qty;
const taxAmount = subtotal * TAX_RATE;
const total = subtotal + taxAmount;

totalAmountSpan.textContent = total.toFixed(2);

summaryDiv.innerHTML = `
  <div><strong>Item:</strong> NoveJet RC Fighter</div>
  <div><strong>Qty:</strong> ${qty}</div>
  <div><strong>Subtotal:</strong> $${subtotal.toFixed(2)}</div>
  <div><strong>Tax (9.68%):</strong> $${taxAmount.toFixed(2)}</div>
  <div><strong>Total:</strong> $${total.toFixed(2)} USD</div>
`;

payBtn.onclick = function () {
  const amountInCents = Math.round(total * 100);

  const options = {
    key: "rzp_test_YOURKEYHERE",
    amount: amountInCents,
    currency: "USD",
    name: "NoveJet",
    description: "NoveJet RC Fighter",
    handler: function (response) {
      window.location.href = "success.html?pid=" + response.razorpay_payment_id;
    }
  };

  new Razorpay(options).open();
};
</script>

</body>
</html>
