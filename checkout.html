<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NoveJet Checkout</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #020311;
      color: #f7f7ff;
      margin: 0;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .box {
      background: #070818;
      padding: 32px 26px;
      border-radius: 16px;
      box-shadow: 0 18px 45px rgba(0,0,0,0.7);
      border: 1px solid rgba(255,255,255,0.1);
      width: 360px;
      text-align: center;
    }
    h1 { margin-top: 0; margin-bottom: 6px; }
    .sub { color: #b5b8d4; font-size: 0.9rem; margin-bottom: 18px; }
    .summary {
      text-align: left;
      font-size: 0.9rem;
      margin-bottom: 14px;
      background: #050615;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.08);
    }
    .summary div { margin: 2px 0; }
    .summary strong { color: #4af2ff; }
    .amount {
      font-size: 1.1rem;
      margin-top: 4px;
    }
    .amount strong { font-size: 1.3rem; }
    button {
      margin-top: 16px;
      width: 100%;
      padding: 12px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(120deg,#4af2ff,#1b9fff);
      color: #020311;
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      cursor: pointer;
      box-shadow: 0 14px 35px rgba(0,0,0,0.8);
    }
    button:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .small {
      margin-top: 10px;
      font-size: 0.78rem;
      color: #b5b8d4;
    }
    .small a { color: #4af2ff; text-decoration: none; }
  </style>
</head>
<body>

<div class="box">
  <h1>Checkout</h1>
  <p class="sub">Complete your NoveJet order with secure Razorpay payment.</p>

  <div id="orderSummary" class="summary"></div>
  <div class="amount">
    Total: <strong>$<span id="totalAmount">0.00</span> USD</strong>
  </div>

  <button id="payBtn">Pay with Razorpay</button>
  <p class="small">
    Changed your mind? <a href="cart.html">Go back to cart</a>
  </p>
</div>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
  const CART_KEY = "novejet_cart";
  const PRODUCT_PRICE = 39.99;

  const summaryDiv = document.getElementById("orderSummary");
  const totalAmountSpan = document.getElementById("totalAmount");
  const payBtn = document.getElementById("payBtn");

  let cart = JSON.parse(localStorage.getItem(CART_KEY)) || { qty: 0, price: PRODUCT_PRICE };
  const qty = cart.qty || 0;

  if (qty <= 0) {
    // no cart, send back
    window.location.href = "cart.html";
  }

  const total = PRODUCT_PRICE * qty;
  totalAmountSpan.textContent = total.toFixed(2);

  summaryDiv.innerHTML = `
    <div><strong>Item:</strong> NoveJet RC Fighter</div>
    <div><strong>Quantity:</strong> ${qty}</div>
    <div><strong>Unit price:</strong> $${PRODUCT_PRICE.toFixed(2)} USD</div>
    <div><strong>Discount:</strong> 35% already applied</div>
  `;

  payBtn.onclick = function () {
    // Razorpay expects amount in the smallest currency unit => cents for USD
    const amountInCents = Math.round(total * 100);

    const options = {
      key: "rzp_test_YOUR_KEY_ID_HERE", // ðŸ”´ replace with your Razorpay Key ID
      amount: amountInCents,
      currency: "USD",
      name: "NoveJet",
      description: "NoveJet RC Fighter order",
      image: "https://via.placeholder.com/80x80.png?text=NJ", // optional, replace with your logo
      // order_id: "order_XXXX", // optional â€“ set this if you generate orders from backend

      prefill: {
        name: "",
        email: "",
        contact: ""
      },

      notes: {
        product: "NoveJet RC Fighter",
        quantity: String(qty)
      },

      theme: {
        color: "#1b9fff"
      },

      handler: function (response) {
        // On successful payment, go to success page
        const url = "success.html?payment_id=" + encodeURIComponent(response.razorpay_payment_id);
        window.location.href = url;
      }
    };

    const rzp = new Razorpay(options);
    rzp.open();
  };
</script>
</body>
</html>
