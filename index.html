<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NoveJet – RC Fighter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>

<header class="nav">
  <div class="nav-left">NOVEJET</div>

  <div class="nav-right">
    <button id="navCartBtn" class="nav-cart">
      Cart <span id="navCartCount" class="nav-cart-count" style="display:none;"></span>
    </button>

    <button id="navBuyBtn" class="launch-btn">LAUNCH JET</button>
  </div>
</header>

<main class="wrap">

  <section class="hero">
    <h1>Turn any park into a runway.</h1>
    <p>Meet the NoveJet RC Fighter — height-hold, crash-resistant, rechargeable.</p>

    <button id="heroBuyBtn" class="cta-primary">Add Jet to Hangar</button>
  </section>

  <section class="product-section">
    <img id="heroJetImage" src="jet-hero.jpg" class="main-jet" />

    <div class="thumbs">
      <button class="thumb active" data-img="jet-hero.jpg"><img src="jet-hero.jpg"></button>
      <button class="thumb" data-img="jet-top.jpg"><img src="jet-top.jpg"></button>
      <button class="thumb" data-img="jet-night.jpg"><img src="jet-night.jpg"></button>
    </div>
  </section>

  <!-- MINI CART DRAWER -->
  <aside class="cart-drawer" id="cartDrawer">
    <h3>Hangar</h3>
    <p id="cartMiniLabel" class="muted"></p>

    <div class="cart-line">
      <span>Qty:</span><span id="cartQty"></span>
    </div>

    <div class="cart-line">
      <span>Subtotal:</span><span>$<span id="cartSubtotal">0.00</span></span>
    </div>

    <div class="cart-line">
      <span>Total:</span><span>$<span id="cartTotal">0.00</span></span>
    </div>

    <button id="cartCheckoutBtn" class="cta-secondary">View Cart & Checkout</button>
  </aside>

</main>

<footer>
  <div class="footer-inner">
    <div>© <span id="year"></span> NoveJet.</div>
    <div class="footer-links">
      <a href="privacy.html">Privacy</a>
      <a href="terms.html">Terms</a>
      <a href="shipping.html">Shipping</a>
      <a href="refund.html">Refunds</a>
    </div>
  </div>
</footer>

<!-- ========================= -->
<!-- FINAL WORKING JAVASCRIPT -->
<!-- ========================= -->
<script>
const PRODUCT_PRICE = 39.99;
const TAX_RATE = 0.0968;
const CART_KEY = "novejet_cart";

// Retrieve existing cart
let cart = JSON.parse(localStorage.getItem(CART_KEY)) || { qty: 0, price: PRODUCT_PRICE };

// DOM elements
const navCartBtn = document.getElementById("navCartBtn");
const navCartCount = document.getElementById("navCartCount");
const navBuyBtn = document.getElementById("navBuyBtn");
const heroBuyBtn = document.getElementById("heroBuyBtn");
const cartDrawer = document.getElementById("cartDrawer");
const cartMiniLabel = document.getElementById("cartMiniLabel");
const cartQtySpan = document.getElementById("cartQty");
const cartSubtotalSpan = document.getElementById("cartSubtotal");
const cartTotalSpan = document.getElementById("cartTotal");
const cartCheckoutBtn = document.getElementById("cartCheckoutBtn");
const yearSpan = document.getElementById("year");
const heroJetImage = document.getElementById("heroJetImage");

// Set year
yearSpan.textContent = new Date().getFullYear();

function saveCart() {
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}

function updateCartUI() {
  const qty = cart.qty || 0;

  if (qty <= 0) {
    navCartCount.style.display = "none";
    cartMiniLabel.textContent = "No jets yet";
    cartQtySpan.textContent = "0";
    cartSubtotalSpan.textContent = "0.00";
    cartTotalSpan.textContent = "0.00";
    return;
  }

  // Show badge
  navCartCount.style.display = "inline-block";
  navCartCount.textContent = qty;

  cartQtySpan.textContent = qty;

  const subtotal = PRODUCT_PRICE * qty;
  const tax = subtotal * TAX_RATE;
  const total = subtotal + tax;

  cartSubtotalSpan.textContent = subtotal.toFixed(2);
  cartTotalSpan.textContent = total.toFixed(2);

  cartMiniLabel.textContent = qty + " jet" + (qty > 1 ? "s" : "") + " ready";
}

function addJet() {
  cart.qty = (cart.qty || 0) + 1;
  saveCart();
  updateCartUI();

  heroBuyBtn.textContent = "Added ✔";
  setTimeout(() => heroBuyBtn.textContent = "Add Jet to Hangar", 1200);
}

// ===============
// EVENT HANDLERS
// ===============
heroBuyBtn.addEventListener("click", addJet);

navBuyBtn.addEventListener("click", () => {
  addJet();
  window.location.href = "checkout.html";
});

navCartBtn.addEventListener("click", () => {
  window.location.href = "cart.html";
});

cartCheckoutBtn.addEventListener("click", () => {
  window.location.href = "cart.html";
});

// Thumbnails
document.querySelectorAll(".thumb").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".thumb").forEach(t => t.classList.remove("active"));
    btn.classList.add("active");
    heroJetImage.src = btn.dataset.img;
  });
});

// Initialize cart
updateCartUI();
</script>

</body>
</html>
